
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>ibatis使用荟萃 - 刘江华的博客</title>
  <meta name="author" content="冰雨">

  
  <meta name="description" content="&emsp;&emsp;ibatis相对hibernate来说，是一个半自动化的ORM映射框架，它是在jdbc的基础上进行了有限的封装，网上有很多关于ibatis与hibernate的讨论、争议，我在这就不再去论述二者之间的优劣，下面，我从程序员开发的角度来看看ibatis的使用。 &emsp;& &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yanyaner.com/blog/2011/06/30/ibatis">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="刘江华的博客" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">刘江华的博客</a></h1>
  
    <h2>众里寻她千百度，蓦然回首，那人却在，灯火阑珊处......</h2>
  
</hgroup>

</header>
  <article class="my_clear"><img src="/images/commons/banner.jpg" class="my_clear"></img></article>
  <nav role="navigation">
  
<ul class="main-navigation">
  <li><a href="/">博客文章</a></li>
  <li><a href="/blog/archives">全部文章</a></li>
  <li><a href="/blog/categories/hui-hua-zuo-pin">绘画作品</a></li>
  <li><a href="/about">关于我</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Ibatis使用荟萃</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-30T15:18:00+08:00" pubdate data-updated="true">2011年06月30日</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>&emsp;&emsp;ibatis相对hibernate来说，是一个半自动化的ORM映射框架，它是在jdbc的基础上进行了有限的封装，网上有很多关于ibatis与hibernate的讨论、争议，我在这就不再去论述二者之间的优劣，下面，我从程序员开发的角度来看看ibatis的使用。</p>

<p>&emsp;&emsp;ibatis已经改名至mybatis，mybaits在动态sql配置、N+1查询方面有比大改进，其它方面改进不多，我觉得ibatis的老用户没有必要升级至mybaits，而且spring尚不支持mybaits（目前mybatis不得不自己提供spring插件）。</p>

<p>&emsp;&emsp;<strong>一、开发sql日志输出</strong></p>

<p>&emsp;&emsp;ibatis中配置日志输入，需要在log4j的properties文件中进行配置。
开发阶段我们将下面两个参数在日志文件中设置为 debug，即可看到详细的sql语句：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>log4j.logger.java.sql.Connection=DEBUG
</span><span class='line'>log4j.logger.java.sql.Statement=DEBUG</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;如果想看到参数和结果集中的具体数据，可将：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>log4j.logger.java.sql.PreparedStatement=DEBUG
</span><span class='line'>log4j.logger.java.sql.ResultSet=DEBUG</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;在日志输出上，ibatis没有hibernate来得方便。</p>

<p>&emsp;&emsp;<strong>二、命名空间要启动</strong></p>

<p>&emsp;&emsp;在ibatis的配置文件中，我们一般都会把useStatementNamespaces=”true”（默认是没有启动的），对于大中型项目一定得这么做，大项目中sql语句块(statement)的重名将不可避免（注：mybatis中已经强制启动）。</p>

<p>&emsp;&emsp;<strong>三、关系映射</strong></p>

<p>&emsp;&emsp;对于领域对象来说关系映射是重点，这也是每一个ORM框架需要解决的问题，我们一起来看ibatis中的关系映射示例：</p>

<p>&emsp;&emsp;1、<strong> 一对一关系</strong>（配置片段为：老公和老婆）</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;typeAlias</span> <span class="na">alias=</span><span class="s">&quot;Husbnad&quot;</span> <span class="na">type=</span><span class="s">&quot;com.my.domain.one2one.Husband&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;typeAlias</span> <span class="na">alias=</span><span class="s">&quot;Wife&quot;</span> <span class="na">type=</span><span class="s">&quot;com.my.domain.one2one.Wife&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;HusbandResult&quot;</span> <span class="na">class=</span><span class="s">&quot;Husbnad&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;id&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;name&quot;</span> <span class="na">column=</span><span class="s">&quot;f_name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;age&quot;</span> <span class="na">column=</span><span class="s">&quot;f_age&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;wife&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span> <span class="na">select=</span><span class="s">&quot;one2one.selectWifeByHusbandId&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;WifeResult&quot;</span> <span class="na">class=</span><span class="s">&quot;Wife&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;id&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_husband_id&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;name&quot;</span> <span class="na">column=</span><span class="s">&quot;f_name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;age&quot;</span> <span class="na">column=</span><span class="s">&quot;f_age&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;husband&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_husband_id&quot;</span> <span class="na">select=</span><span class="s">&quot;one2one.selectHusbandByWifeId&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>
</span><span class='line'>   <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectHusbandById&quot;</span> <span class="na">parameterClass=</span><span class="s">&quot;int&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;HusbandResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    select
</span><span class='line'>     *
</span><span class='line'>    from t_husband
</span><span class='line'>    where pk_id = #id#
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectHusbandByWifeId&quot;</span> <span class="na">parameterClass=</span><span class="s">&quot;int&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;HusbandResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    select
</span><span class='line'>     *
</span><span class='line'>    from t_husband
</span><span class='line'>    where pk_id = #id#
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectWifeByHusbandId&quot;</span> <span class="na">parameterClass=</span><span class="s">&quot;int&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;WifeResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    select
</span><span class='line'>     *
</span><span class='line'>    from t_wife
</span><span class='line'>    where pk_husband_id = #id#
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;2、<strong> 一对多关系</strong>（配置片段为：客户和订单）</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'> <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;CustomerResult&quot;</span> <span class="na">class=</span><span class="s">&quot;Customer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;id&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;name&quot;</span> <span class="na">column=</span><span class="s">&quot;f_name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;phone&quot;</span> <span class="na">column=</span><span class="s">&quot;f_phone&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>   <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;orders&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span> <span class="na">select=</span><span class="s">&quot;one2many.selectOrderByCustomerId&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectOrderByCustomerId&quot;</span> <span class="na">parameterClass=</span><span class="s">&quot;int&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;OrderResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    select
</span><span class='line'>      *
</span><span class='line'>    from t_order
</span><span class='line'>    where fk_customer_id = #customerId#
</span><span class='line'><span class="nt">&lt;/select&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;3、<strong>多对多</strong>（配置片段为用户、用户组关系）：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;typeAlias</span> <span class="na">alias=</span><span class="s">&quot;Group&quot;</span> <span class="na">type=</span><span class="s">&quot;com.my.domain.many2many.Group&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;typeAlias</span> <span class="na">alias=</span><span class="s">&quot;User&quot;</span> <span class="na">type=</span><span class="s">&quot;com.my.domain.many2many.User&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;GroupResult&quot;</span> <span class="na">class=</span><span class="s">&quot;Group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;id&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;groupName&quot;</span> <span class="na">column=</span><span class="s">&quot;f_name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;users&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span> <span class="na">select=</span><span class="s">&quot;many2many.getUsersByGroupId&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;UserResult&quot;</span> <span class="na">class=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;id&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;userName&quot;</span> <span class="na">column=</span><span class="s">&quot;f_name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;groups&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span> <span class="na">select=</span><span class="s">&quot;many2many.getGroupsByUserId&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>
</span><span class='line'>   <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectGroupById&quot;</span> <span class="na">parameterClass=</span><span class="s">&quot;int&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;GroupResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    select *
</span><span class='line'>    from t_group where pk_id = #id#
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>
</span><span class='line'>   <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getUsersByGroupId&quot;</span> <span class="na">parameterClass=</span><span class="s">&quot;int&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;UserResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    select *
</span><span class='line'>    from t_user u left join  t_user_group ug
</span><span class='line'>    on u.pk_id = ug.fk_user_id where ug.fk_group_id =  #gid#
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectUserById&quot;</span> <span class="na">parameterClass=</span><span class="s">&quot;int&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;UserResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    select *
</span><span class='line'>    from t_user where pk_id = #id#
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>
</span><span class='line'>   <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getGroupsByUserId&quot;</span> <span class="na">parameterClass=</span><span class="s">&quot;int&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;GroupResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    select *
</span><span class='line'>    from t_group g left join  t_user_group ug
</span><span class='line'>    on g.pk_id = ug.fk_group_id where ug.fk_user_id =  #uid#
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;4、 <strong>继承映射</strong>（配置片段为动物父类，猫、狗子类）</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;AnimalResult&quot;</span> <span class="na">class=</span><span class="s">&quot;Animal&quot;</span> <span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;id&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;name&quot;</span> <span class="na">column=</span><span class="s">&quot;f_name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;discriminator</span> <span class="na">column=</span><span class="s">&quot;f_type&quot;</span> <span class="na">javaType=</span><span class="s">&quot;int&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;subMap</span> <span class="na">resultMap=</span><span class="s">&quot;CatResult&quot;</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;subMap</span> <span class="na">resultMap=</span><span class="s">&quot;DogResult&quot;</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/discriminator&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;DogResult&quot;</span> <span class="na">class=</span><span class="s">&quot;Dog&quot;</span> <span class="na">extends=</span><span class="s">&quot;AnimalResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;boneCount&quot;</span> <span class="na">column=</span><span class="s">&quot;f_bone&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>   <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;CatResult&quot;</span> <span class="na">class=</span><span class="s">&quot;Cat&quot;</span> <span class="na">extends=</span><span class="s">&quot;AnimalResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;mouseCount&quot;</span> <span class="na">column=</span><span class="s">&quot;f_mouse&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectAnimalById&quot;</span> <span class="na">parameterClass=</span><span class="s">&quot;int&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;AnimalResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  select * from t_animal
</span><span class='line'>  where pk_id = #id#
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;selectAnimalById会根据f_type（1：猫、2：狗）的取值正确实例化子类类型。</p>

<p>&emsp;&emsp;5、<strong>多对一关系</strong>，自关联关系映射可以参照上面的写出，我不再贴出示例代码。</p>

<p>&emsp;&emsp;<strong>四、解决N+1查询问题</strong></p>

<p>&emsp;&emsp;ibatis中的一对一、一对多映射配置代码都存在查询N+1问题，何为N+1？比如一对一关系中：有10条老公数据，在执行selectAllHusabnds时，将会产生11条sql，一条是取husbnad集合的，另10条是加载husbnad中的wife对象的。</p>

<p>&emsp;&emsp;如果在业务中取到husbnad后不使用其中的wife对象，将造成不必要的加载（当然可以用延迟加载解决），如果用到wife系统将额外产生10条查询sql，在系统性能上也存在问题，因此，我们来看看ibatis 中如何解决这个问题。</p>

<p>&emsp;&emsp;1、<strong>一对一的N+1问题</strong>，可以用下面的配置代码解决：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;HusbandResult&quot;</span> <span class="na">class=</span><span class="s">&quot;Husbnad&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;id&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;name&quot;</span> <span class="na">column=</span><span class="s">&quot;f_name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;age&quot;</span> <span class="na">column=</span><span class="s">&quot;f_age&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;wife.id&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_husband_id&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;wife.name&quot;</span> <span class="na">column=</span><span class="s">&quot;w_name&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;wife.age&quot;</span> <span class="na">column=</span><span class="s">&quot;w_age&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectHusbandById&quot;</span> <span class="na">parameterClass=</span><span class="s">&quot;int&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;HusbandResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    select
</span><span class='line'>     *, w.f_name as w_name, w.f_age as w_age
</span><span class='line'>    from t_husband  h, t_wife  w
</span><span class='line'>    where h.pk_id = w.pk_husband_id and h.pk_id = #id#
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;我们把两张表关联查询后产生的结果集映射到resultMap中，减少了sql的查询，从而提高了系统性能。</p>

<p>&emsp;&emsp;2<strong>、一对多N+1</strong>也可采用类似的方法实现。</p>

<p>&emsp;&emsp;比如，客户和订单一对多关系的N+1方案的配置代码如下，使用了groupBy来指定按什么属性（注意是属性名，而非列名）分组：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>  <span class="nt">&lt;typeAlias</span> <span class="na">alias=</span><span class="s">&quot;Customer&quot;</span> <span class="na">type=</span><span class="s">&quot;com.my.domain.one2many.Customer&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;typeAlias</span> <span class="na">alias=</span><span class="s">&quot;Order&quot;</span> <span class="na">type=</span><span class="s">&quot;com.my.domain.one2many.Order&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;CustomerResult&quot;</span> <span class="na">class=</span><span class="s">&quot;Customer&quot;</span> <span class="na">groupBy=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;id&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;name&quot;</span> <span class="na">column=</span><span class="s">&quot;f_name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;phone&quot;</span> <span class="na">column=</span><span class="s">&quot;f_phone&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;orders&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_id&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;one2many2.OrderResult&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'> <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;OrderResult&quot;</span> <span class="na">class=</span><span class="s">&quot;Order&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;orderID&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_o_id&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;name&quot;</span> <span class="na">column=</span><span class="s">&quot;f_o_name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;money&quot;</span> <span class="na">column=</span><span class="s">&quot;f_money&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectAllCustomers&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;one2many2.CustomerResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  select c.pk_id, c.f_name, c.f_phone,
</span><span class='line'>  o.pk_id as pk_o_id, o.f_name as f_o_name, o.f_money
</span><span class='line'>  from t_customer c
</span><span class='line'>  left join t_order o
</span><span class='line'>  on o.fk_customer_id = c.pk_id
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;3、<strong>多对多的N+1问题</strong>，可以通过下面的配置解决：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;typeAlias</span> <span class="na">alias=</span><span class="s">&quot;Group&quot;</span> <span class="na">type=</span><span class="s">&quot;com.my.domain.many2many.Group&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;typeAlias</span> <span class="na">alias=</span><span class="s">&quot;User&quot;</span> <span class="na">type=</span><span class="s">&quot;com.my.domain.many2many.User&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;GroupResult&quot;</span> <span class="na">class=</span><span class="s">&quot;Group&quot;</span> <span class="na">groupBy=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;id&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_g_id&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;groupName&quot;</span> <span class="na">column=</span><span class="s">&quot;f_g_name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;users&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_g_id&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;many2many.UserResult&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;UserResult&quot;</span> <span class="na">class=</span><span class="s">&quot;User&quot;</span> <span class="na">groupBy=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;id&quot;</span> <span class="na">column=</span><span class="s">&quot;pk_u_id&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;userName&quot;</span> <span class="na">column=</span><span class="s">&quot;f_u_name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/resultMap&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectAllGrups&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;many2many.GroupResult&quot;</span> <span class="nt">&gt;</span>
</span><span class='line'> select g.pk_id as pk_g_id, g.f_name as f_g_name,
</span><span class='line'>  u.pk_id as pk_u_id, u.f_name as f_u_name
</span><span class='line'>  from t_group g
</span><span class='line'>  left join t_user_group ug
</span><span class='line'>  on ug.fk_group_id = g.pk_id
</span><span class='line'>  left join  t_user u
</span><span class='line'>  on ug.fk_user_id = u.pk_id
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;但是要注意的是，上面多对多配置代码中的resultMap并没有完整表达领域对象的关系，如果我们在UserResult中加入了resultMap=”many2many.GroupResult”，ibatis中将会出现死循环错误。如果要完整表达领域对象关系，还得在配置文件上想办法，比如：另外定义一个resultMap。
ibatis在查询的N+1问题上需要程序员意识到这个问题并且进行手工配置，这点在mybatis中得到了解决，mybatis引入了collection配置节点。</p>

<p>&emsp;&emsp;如果想立即加载而又不想出现N+1查询问题，就得用我在上面提出的一些配置办法。
当然，前提是你得对sql比较熟悉才行，我写sql就是弱项，复杂sql研究研究也写得出来，但是写完来后会很快忘记，下次遇到同类型的sql我还是去“研究”，呵呵，我有点“烦”sql哦，复杂sql别找我！</p>

<p>&emsp;&emsp;<strong>五、动态查询</strong></p>

<p>&emsp;&emsp;动态查询可谓是ibatis的亮点，ibatis的实现方式也非常优雅，请看下面的配置片段：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectAllCustomers&quot;</span>  <span class="na">parameterClass=</span><span class="s">&quot;Customer&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;CustomerResult&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    select * from t_customer
</span><span class='line'>    <span class="nt">&lt;dynamic</span> <span class="na">prepend=</span><span class="s">&quot;where&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;isNotEmpty</span> <span class="na">prepend=</span><span class="s">&quot;and&quot;</span> <span class="na">property=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          (f_name like #name#)
</span><span class='line'>      <span class="nt">&lt;/isNotEmpty&gt;</span>
</span><span class='line'>      <span class="nt">&lt;isNotEmpty</span> <span class="na">prepend=</span><span class="s">&quot;and&quot;</span> <span class="na">property=</span><span class="s">&quot;phone&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          (f_phone like #phone#)
</span><span class='line'>      <span class="nt">&lt;/isNotEmpty&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/dynamic&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/select&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;ibatis会根据传入对象中的条件，组合生成相应的查询语句，其实就是QBE，hibernate虽然也有类似功能，但比较弱，比如：对象中的多个复杂对象做为example的时hibernate无法解决。而mybaits在这一块更是改进很多，使用起来也更加的方便。</p>

<p>&emsp;&emsp;<strong>六、延迟加载</strong></p>

<p>&emsp;&emsp;延迟加载是所有ORM框架提高效率必用手段之一，ibatis中设置lazyLoadingEnabled=”true”，会延迟加载集合以及复杂对象类型（默认情况下就是延迟加载的，一般字节码增强也要打开，以进一步提高效率）。</p>

<p>&emsp;&emsp;<strong>七、缓存的应用</strong></p>

<p>&emsp;&emsp;从底层来看，java通过JDBC访问数据库应该是最高效的，任何ORM框架都没有直接通过底层操作来得快，因此，ORM提速的另一个途径就是使用缓存， ibatis可以使用多种缓存框架，而且配置灵活。我们用cacheModel节点定义一个缓存区域。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;cacheModel</span> <span class="na">type=</span><span class="s">&quot;MEMORY&quot;</span> <span class="na">id=</span><span class="s">&quot;your_cache_range_name&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/cacheModel&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;某个sql statement 需要缓存结果时，只需用cacheModel属性指定缓存区域名称即可，例如：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;selectDomainObjectById&quot;</span> <span class="na">parameterClass=</span><span class="s">&quot;someType&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;DomainObjectResult&quot;</span> <span class="na">cacheModel=</span><span class="s">&quot; your_cache_range_name &quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&emsp;&emsp;<strong>八、自动化生成工具</strong></p>

<p>&emsp;&emsp;1、abator插件</p>

<p>&emsp;&emsp;你可以用abator for eclipse plugin来帮助你从表生成对象、xml映射代码、 CRUD的配置代码、DAO代码（还可选择生成spring集成后风格的DAO代码），abator的配置代码不再贴出，自己上网搜一下。</p>

<p>&emsp;&emsp;另，abator生成的QBE代码可以研究一下，可用来解决多条件组合查询问题。</p>

<p>&emsp;&emsp;2、mybaits generator工具</p>

<p>&emsp;&emsp;此工具在命令行下运行，也需要预先编辑好配置文件，使用方法请google一下。</p>

<p>&emsp;&emsp;自动化生成工具会为每个对象都生成相应的dao代码，但如果你的项目中使用的是通用dao的架构（请参阅我的《<a href="/blog/2010/11/01/p4/">四种持久层设计方案比较</a>》一文），ibatis技术框架也是适用的。</p>

<p>&emsp;&emsp;<strong>九、项目中的决择</strong></p>

<p>&emsp;&emsp;ibatis是一个“半自动化”的框架，使用起来自然没有“全自动化”的方便，也正是因为“半自动化”的原因，ibatis才拥有自己独特的适用场合和表演舞台。</p>

<p>&emsp;&emsp;在项目中进行底层技术选型时，我认为有存在下面的因素可优先选择ibatis：在遗留系统现在数据基础上进行开发；公司开发人员非常熟悉且喜欢写sql （有些老程序员更习惯以数据库表为中心的开发模式）；项目的其它非功能性需求。除些之外，请选择更加OO的ＯＲＭ映射框架。</p>

<p>&emsp;&emsp;我曾经看过好几个公司ibatis开发的项目，对象和表结构都是一一对应（更有甚者把表外键都建成了对象属性），对象关系几乎不存在，也就没有了领域建模的概念。从我上面写的一些配置代码也可以看出，ibatis在处理一对一、一对多、多对多查询（主要是N+1）上都这么复杂，更不用说一对一、一对多、多对多的增、删、改操作了（请想想hibernate中的cascade，inverse带来便捷），也就是说，对象之间的所有关系要程序员手工书写sql去维护，这对于增、删、改操作还是非常麻烦的，一些级联操作还得在业务实现代码中主动调用，增加了业务的复杂性。</p>

<p>&emsp;&emsp;也许，在ibatis的项目中将对象和表结构进行一一映射是一种最方便、最快捷的方法，但对于喜欢OO建模的人来说，可能无法接受。项目中如果用表结构对象代替领域对象，只会增加项目实现复杂性和后期维护成本。</p>

<p>&emsp;&emsp;话又说回来，Hibernate、JDO这些ORM框架可以较好地支持对象透明持久化，但学习成本相对来说也要高一些，也正是这些原因让很多项目经理放弃了这些技术。还有人说hibernate性能低下，项目失败的风险很大，我认为这些人并没有全面、深入地掌握Hibernate，比如：对于性能低下的部分，你可以通过hibernate执行native sql解决，甚至存储过程。还有一个是技术转型的原因，对于从C/S转到B/S的老程序员来说，我很清楚OO思想和以表结构为中心的思想之间的冲突，但只你要突破了，你才会达到另一个认识层次，才能体会到其中的好处。</p>

<p>&emsp;&emsp;这两天在搭建省质监督局二期项目的领域模型，项目小组中的主力程序员几次让我想发火。因为我和他一谈到某项具体需要，他总是提出表结构、冗余、外键，提到后期如何操作表实现功能，而且我必须要努力说服他，毕竟后期的代码是由他们去实现的。此人是一个很执着的人，只有自己认可的、领会的才会按照方案去执行，呵呵。我就是要引导他，逐步建立起一个合理的、双方都认可的域模型。</p>

<p>&emsp;&emsp;最后，希望本文对想深入了解、学习ibatis的人有用。</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard"> <span class="fn">冰雨</span> 发表于 </span>

      








  


<time datetime="2011-06-30T15:18:00+08:00" pubdate data-updated="true">2011年06月30日</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/java/'>java</a>, <a class='category' href='/blog/categories/javaee/'>javaEE</a>, <a class='category' href='/blog/categories/ji-zhu/'>技术</a>
  
</span>


    </p>
    
      <!-- JiaThis Button BEGIN -->
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?move=0&amp;btn=r5.gif" charset="utf-8"></script>
<!-- JiaThis Button END 
<div class="sharing">
  
  
  
</div>-->

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/06/16/validation/" title="上一篇文章: 如何处理项目中的数据验证">&laquo;上一篇:&nbsp;&nbsp;如何处理项目中的数据验证</a>
      
      
        <a class="basic-alignment right" href="/blog/2011/07/02/wap/" title="下一篇文章: WAP系统上线测试中，总结一下">下一篇: &nbsp;&nbsp;WAP系统上线测试中，总结一下 &raquo;</a>
      
    </p>
  </footer>
</article>


  <section>
    <h3>评论信息</h3>
    <div id="comments" aria-live="polite"><no<!-- Duoshuo Comment BEGIN -->
<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"ljh2008"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
</script>
<!-- Duoshuo Comment END -->
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>最近文章</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/11/26/my-blog/">我的独立博客再次开放</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/09/art/">色彩稿- 程序猿</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/28/angular-js5/">一步步教你用angular.js实现一个基本应用---第五部分</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/28/angular-js4/">一步步教你用angular.js实现一个基本应用---第四部分</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/28/angular-js3/">一步步教你用angular.js实现一个基本应用---第三部分</a>
      </li>
    
  </ul>
</section>
<section>
   <h1>文章分类</h1>
   <ul id="categories">
     
		<li><a href="/blog/categories/sheng-huo">生活</a><a href="/blog/categories/yi-zhu">艺术</a></li>
		<li><a href="/blog/categories/ji-zhu">技术</a><a href="/blog/categories/jia-gou">架构</a></li>
		<li><a href="/blog/categories/java">java</a><a href="/blog/categories/javaee">javaEE</a></li>
		<li><a href="/blog/categories/qian-duan-ji-zhu">前端技术</a><a href="/blog/categories/nodejs">Node.js</a></li>
	    <li><a href="/blog/categories/bu-zou-jie-xi">步骤解析</a></li>
	 
   </ul>
</section>

<section>
<h1>最近评论</h1>
<ul class="ds-recent-comments" data-num-items="10">
</ul>
<!--多说js加载开始，一个页面只需要加载一次 -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"ljh2008"};
(function() {
var ds = document.createElement('script');
ds.type = 'text/javascript';
ds.async = true;ds.src = 'http://static.duoshuo.com/embed.js';
ds.charset = 'UTF-8';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
<!--多说js加载结束，一个页面只需要加载一次 -->
</section><section>
<h1>最近来访</h1>
<ul class="ds-recent-visitors" data-num-items="10">
</ul>
<script type="text/javascript">
var duoshuoQuery = {short_name:"ljh2008"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
</section>




  
</aside>



    </div>
  </div>
  <footer role="contentinfo"><p>
  版权所有 &copy; 2013 - 冰雨 -
  <span class="credit">Powered by <a href="http://yanyaner.com">刘江华的博客</a></span>
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5742334'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5742334%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>
</p>

</footer>
  











</body>
</html>
